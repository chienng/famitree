export type Locale = 'en' | 'vi'

export const translations: Record<Locale, Record<string, string>> = {
  en: {
    'app.tagline': 'Family Tree Manager',
    'app.language': 'Language',
    'nav.tree': 'Tree',
    'nav.list': 'List',
    'nav.intro': 'Introduction',
    'search.placeholder': 'Search family members by name…',
    'search.label': 'Search family members by name',
    'actions.addPerson': 'Add person',
    'tree.empty': 'No family members yet.',
    'tree.addFirst': 'Add first person',
    'tree.noMatches': 'No one matches "{{query}}"',
    'tree.branchLabel': 'Branch',
    'tree.branchAll': 'All branches',
    'tree.branchSearchPlaceholder': 'Search branch…',
    'tree.print': 'Print',
    'tree.printTitle': 'Family Tree',
    'tree.fitToView': 'Fit to view',
    'tree.zoomIn': 'Zoom in',
    'tree.zoomOut': 'Zoom out',
    'tree.shiftScrollHint': 'Shift + scroll to pan horizontally',
    'tree.layoutTraditional': 'Traditional (ancestors → descendants)',
    'tree.layoutBranch': 'Branch (horizontal & vertical)',
    'tree.layoutLabel': 'Tree layout',
    'sidebar.selectPerson': 'Select a person to edit or add relationships.',
    'treeView.spouse': 'Spouse: {{name}}',
    'treeView.yearsOld': 'years old',
    'treeView.father': 'Father',
    'treeView.mother': 'Mother',
    'treeView.son': 'Son',
    'treeView.daughter': 'Daughter',
    'treeView.husband': 'Husband',
    'treeView.wife': 'Wife',
    'treeView.spouseLabel': 'Spouse',
    'treeView.parent': 'Parent',
    'treeView.child': 'Child',
    'list.noMatches': 'No matches for "{{query}}"',
    'list.empty': 'No people in the tree yet.',
    'list.matches': 'Matches ({{n}})',
    'list.allMembers': 'All members ({{n}})',
    'list.noDates': 'No dates',
    'intro.loading': 'Loading introduction…',
    'form.addPerson': 'Add person',
    'form.editPerson': 'Edit person',
    'form.name': 'Name *',
    'form.fullName': 'Full name',
    'form.title': 'Title',
    'form.address': 'Address',
    'form.buriedAt': 'Buried at',
    'form.buriedAtPlaceholder': 'e.g. cemetery, location',
    'form.birthDate': 'Birth date',
    'form.birthPlace': 'Birth place',
    'form.birthPlacePlaceholder': 'e.g. village, district, province',
    'form.deathDate': 'Death date (lunar)',
    'form.deathDatePlaceholder': 'Lunar calendar, e.g. 04-02 AL, or leave empty',
    'form.datePlaceholder': 'dd/MM/yyyy, year only (e.g. 1945), or leave empty',
    'form.gender': 'Gender',
    'form.notes': 'Notes',
    'form.optionalNotes': 'Optional notes',
    'form.avatar': 'Avatar',
    'form.uploadPhoto': 'Upload photo',
    'form.changePhoto': 'Change photo',
    'form.clickToUploadPhoto': 'Click photo to upload',
    'form.clickToChangePhoto': 'Click photo to change',
    'form.removePhoto': 'Remove photo',
    'form.cancel': 'Cancel',
    'form.close': 'Close',
    'form.add': 'Add',
    'form.save': 'Save',
    'form.delete': 'Delete',
    'form.deleteConfirm': 'Delete "{{name}}" and all their relationships?',
    'form.relationships': 'Relationships',
    'form.parent': 'Parent:',
    'form.child': 'Child:',
    'form.spouse': 'Spouse:',
    'form.remove': 'Remove',
    'form.noRelationships': 'No relationships yet.',
    'form.saveFirstToAddRelationships': 'Save the person first to add relationships.',
    'form.addParent': 'Add parent',
    'form.addChild': 'Add child',
    'form.addSpouse': 'Add spouse',
    'form.selectPerson': 'Select person…',
    'form.searchPerson': 'Search…',
    'form.noOptions': 'No options',
    'form.noMatches': 'No matches',
    'form.addAsParent': 'Add as parent',
    'form.addAsChild': 'Add as child',
    'form.addParentInLaw': 'Add parent (in-law)',
    'form.addChildInLaw': 'Add child (in-law)',
    'form.addParentAdopt': 'Add parent (adopt)',
    'form.addChildAdopt': 'Add child (adopt)',
    'form.addAsParentInLaw': 'Add as parent (in-law)',
    'form.addAsChildInLaw': 'Add as child (in-law)',
    'form.addAsParentAdopt': 'Add as parent (adopt)',
    'form.addAsChildAdopt': 'Add as child (adopt)',
    'form.addAsSpouse': 'Add as spouse',
    'form.parentInLaw': 'Parent (in-law):',
    'form.childInLaw': 'Child (in-law):',
    'form.parentAdopt': 'Parent (adopt):',
    'form.childAdopt': 'Child (adopt):',
    'form.addAsDaughterInLaw': 'Add as daughter-in-law',
    'form.addAsSonInLaw': 'Add as son-in-law',
    'form.daughterInLaw': 'Daughter-in-law',
    'form.sonInLaw': 'Son-in-law',
    'form.newSpouseName': 'New spouse name',
    'form.addNewSpouseAsInLaw': 'Add new spouse (in-law)',
    'form.selectChildForInLaw': 'Select child (son for daughter-in-law, daughter for son-in-law)',
    'form.inLawDaughterInLawHint': 'Select a son first',
    'form.inLawSonInLawHint': 'Select a daughter first',
    'form.generation': 'Generation (đời)',
    'form.generationPlaceholder': '1, 2, 3…',
    'form.roleLabel': 'Role in family',
    'form.removeRelationship': 'Remove relationship',
    'treeView.daughterInLaw': 'Daughter-in-law',
    'treeView.sonInLaw': 'Son-in-law',
    'treeView.paternalGrandchild': 'Grandchild (paternal)',
    'treeView.maternalGrandchild': 'Grandchild (maternal)',
    'treeView.previousGenerations': 'Previous generations',
    'treeView.generationLevel': 'Generation {{n}}',
    'treeView.wifeN': 'Wife {{n}}',
    'treeView.husbandN': 'Husband {{n}}',
    'form.spouseN': 'Spouse {{n}}',
    'summary.title': 'Summary by branch',
    'summary.familyTreeSummary': 'Family tree summary',
    'summary.empty': 'No members yet. Add the first person to start your tree.',
    'summary.totalMembers': 'Total members',
    'summary.deceased': 'Deceased',
    'summary.living': 'Living',
    'summary.maleMembers': 'Male members',
    'summary.femaleMembers': 'Female members',
    'summary.livingMaleMembers': 'Living male members',
    'summary.livingFemaleMembers': 'Living female members',
    'summary.age0to5': 'Aged 0–5',
    'summary.age6to17': 'Aged 6–17',
    'summary.age18to35': 'Aged 18–35',
    'summary.age36to50': 'Aged 36–50',
    'summary.age51to70': 'Aged 51–70',
    'summary.age70plus': 'Over 70',
    'summary.couples': 'Couples',
    'summary.parentChildLinks': 'Parent–child links',
    'summary.rootFamilies': 'Root families',
    'summary.maleDeceased60Plus': 'Male deceased, 60+',
    'summary.byBranch': 'By branch',
    'summary.branchUnnamed': '(Unnamed branch)',
    'reminders.title': 'Upcoming birthdays & death anniversaries',
    'reminders.birthdaysSection': 'Upcoming birthdays',
    'reminders.deathAnniversariesSection': 'Upcoming death anniversaries',
    'reminders.today': 'Today',
    'reminders.tomorrow': 'Tomorrow',
    'reminders.daysUntil': 'In {{count}} days',
    'reminders.turnsAge': 'turns {{age}}',
    'reminders.emptyBirthdays': 'No birth dates recorded.',
    'reminders.emptyAnniversaries': 'No death dates recorded.',
    'reminders.menu': 'Birthdays & anniversaries',
    'gender.male': 'Male',
    'gender.female': 'Female',
    'gender.other': 'Other',
    'auth.login': 'Log in',
    'auth.register': 'Register',
    'auth.system': 'System',
    'auth.logout': 'Log out',
    'auth.username': 'Username',
    'auth.password': 'Password',
    'auth.loginTitle': 'Log in to System',
    'auth.registerTitle': 'Create an account',
    'auth.noAccount': 'No account? Register',
    'auth.hasAccount': 'Already have an account? Log in',
    'auth.loginFailed': 'Invalid username or password.',
    'auth.manageUsers': 'Manage users',
    'auth.manageUsersIntro': 'Create and manage user accounts. Disabled users cannot sign in.',
    'auth.existingUsers': 'Existing users',
    'auth.searchUsers': 'Search users…',
    'auth.searchUsersLabel': 'Search users',
    'auth.addNewUser': 'Add new user',
    'auth.createUser': 'Create user',
    'auth.newUserUsername': 'New username',
    'auth.newUserPassword': 'New password (min 4)',
    'auth.confirmPassword': 'Confirm password',
    'auth.passwordMismatch': 'Passwords do not match.',
    'auth.lastUpdated': 'Last updated',
    'auth.action': 'Action',
    'auth.userCreated': 'User created.',
    'auth.onlyAdminCanCreateUsers': 'Only admin can create new users.',
    'auth.viewOnly': 'View only. Contact admin to add or edit.',
    'auth.disabled': 'Disabled',
    'auth.enable': 'Enable',
    'auth.disable': 'Disable',
    'auth.editUser': 'Edit',
    'auth.updateUser': 'Update user',
    'auth.removeUser': 'Remove',
    'auth.cannotDeleteSelf': 'You cannot remove your own account.',
    'auth.cannotDisableAdmin': 'The admin user cannot be disabled.',
    'auth.removeUserConfirm': 'Remove user "{{name}}"?' ,
    'auth.userUpdated': 'User updated.',
    'auth.userRemoved': 'User removed.',
    'auth.exportCsv': 'Export to CSV',
    'auth.importCsv': 'Import CSV',
    'auth.exportCsvConfirm': 'Export family tree to CSV? A backup file will be downloaded.',
    'auth.importCsvConfirm': 'Import from CSV? You will be asked to select a backup file. People will be added or updated (same ID will be updated).',
    'auth.saveDatabase': 'Save database (.sqlite)',
    'auth.saveDatabaseConfirm': 'Save the full database to a .sqlite file? This includes all users and family data.',
    'auth.restoreDatabase': 'Restore from database file',
    'auth.restoreDatabaseConfirm': 'Restore from a .sqlite file? This will replace all current data. You will need to log in again.',
    'auth.setMyBranch': 'Set my branch',
    'auth.setMyBranchIntro': 'Choose your default branch. Tree and reminders will filter by this branch after login.',
    'auth.defaultBranch': 'Default branch',
  },
  vi: {
    'app.tagline': 'Gia Phả họ Nguyễn - Thôn Nội',
    'app.language': 'Ngôn ngữ',
    'nav.tree': 'Cây gia phả',
    'nav.list': 'Danh sách',
    'nav.intro': 'Giới thiệu',
    'search.placeholder': 'Tìm theo tên thành viên…',
    'search.label': 'Tìm theo tên thành viên',
    'actions.addPerson': 'Thêm người',
    'tree.empty': 'Chưa có thành viên nào.',
    'tree.addFirst': 'Thêm người đầu tiên',
    'tree.noMatches': 'Không có kết quả cho "{{query}}"',
    'tree.branchLabel': 'Chọn nhánh',
    'tree.branchAll': 'Tất cả các nhánh',
    'tree.branchSearchPlaceholder': 'Tìm nhánh…',
    'tree.print': 'In ấn',
    'tree.printTitle': 'Cây gia phả họ Nguyễn - Thôn Nội',
    'tree.fitToView': 'Vừa màn hình',
    'tree.zoomIn': 'Phóng to',
    'tree.zoomOut': 'Thu nhỏ',
    'tree.shiftScrollHint': 'Giữ Shift + cuộn chuột để xem ngang',
    'tree.layoutTraditional': 'Truyền thống (tổ tiên → con cháu)',
    'tree.layoutBranch': 'Nhánh ngang dọc',
    'tree.layoutLabel': 'Kiểu hiển thị cây',
    'sidebar.selectPerson': 'Chọn một người để sửa hoặc thêm quan hệ.',
    'treeView.spouse': 'Vợ/chồng: {{name}}',
    'treeView.yearsOld': 'tuổi',
    'treeView.father': 'Cha',
    'treeView.mother': 'Mẹ',
    'treeView.son': 'Con trai',
    'treeView.daughter': 'Con gái',
    'treeView.husband': 'Chồng',
    'treeView.wife': 'Vợ',
    'treeView.spouseLabel': 'Vợ/chồng',
    'treeView.parent': 'Cha/mẹ',
    'treeView.child': 'Con',
    'list.noMatches': 'Không tìm thấy "{{query}}"',
    'list.empty': 'Chưa có ai trong cây gia phả.',
    'list.matches': 'Kết quả ({{n}})',
    'list.allMembers': 'Tất cả ({{n}})',
    'list.noDates': 'Chưa có ngày',
    'intro.loading': 'Đang tải lời tựa…',
    'form.addPerson': 'Thêm thành viên',
    'form.editPerson': 'Sửa thông tin thành viên',
    'form.name': 'Họ tên *',
    'form.fullName': 'Họ và tên',
    'form.title': 'Chức danh',
    'form.address': 'Địa chỉ',
    'form.buriedAt': 'An táng/mộ phần tại',
    'form.buriedAtPlaceholder': 'Vd. nghĩa trang, địa điểm',
    'form.birthDate': 'Ngày sinh',
    'form.birthPlace': 'Quê quán',
    'form.birthPlacePlaceholder': 'Vd. làng, xã, tỉnh',
    'form.deathDate': 'Ngày mất (âm lịch)',
    'form.deathDatePlaceholder': 'Âm lịch, vd. 04-02 AL, hoặc để trống',
    'form.datePlaceholder': 'dd/MM/yyyy, chỉ năm (vd. 1945), hoặc để trống',
    'form.gender': 'Giới tính',
    'form.notes': 'Ghi chú',
    'form.optionalNotes': 'Ghi chú (tùy chọn)',
    'form.avatar': 'Ảnh đại diện',
    'form.uploadPhoto': 'Tải ảnh lên',
    'form.changePhoto': 'Đổi ảnh',
    'form.clickToUploadPhoto': 'Nhấn vào ảnh để tải lên',
    'form.clickToChangePhoto': 'Nhấn vào ảnh để đổi',
    'form.removePhoto': 'Xóa ảnh',
    'form.cancel': 'Hủy',
    'form.close': 'Đóng',
    'form.add': 'Thêm',
    'form.save': 'Lưu',
    'form.delete': 'Xóa',
    'form.deleteConfirm': 'Xóa "{{name}}" và mọi quan hệ?',
    'form.relationships': 'Quan hệ',
    'form.parent': 'Cha/mẹ:',
    'form.child': 'Con:',
    'form.spouse': 'Vợ/chồng:',
    'form.remove': 'Xóa',
    'form.noRelationships': 'Chưa có quan hệ.',
    'form.saveFirstToAddRelationships': 'Lưu thông tin trước khi thêm quan hệ.',
    'form.addParent': 'Thêm cha/mẹ',
    'form.addChild': 'Thêm con',
    'form.addSpouse': 'Thêm vợ/chồng',
    'form.selectPerson': 'Chọn người…',
    'form.searchPerson': 'Tìm kiếm…',
    'form.noOptions': 'Không có lựa chọn',
    'form.noMatches': 'Không tìm thấy',
    'form.addAsParent': 'Thêm làm cha/mẹ',
    'form.addAsChild': 'Thêm làm con',
    'form.addParentInLaw': 'Thêm cha/mẹ (chồng/vợ)',
    'form.addChildInLaw': 'Thêm con (con dâu/con rể)',
    'form.addParentAdopt': 'Thêm cha/mẹ (nuôi)',
    'form.addChildAdopt': 'Thêm con (nuôi)',
    'form.addAsParentInLaw': 'Thêm làm cha/mẹ (chồng/vợ)',
    'form.addAsChildInLaw': 'Thêm làm con (con dâu/con rể)',
    'form.addAsParentAdopt': 'Thêm làm cha/mẹ (nuôi)',
    'form.addAsChildAdopt': 'Thêm làm con (nuôi)',
    'form.addAsSpouse': 'Thêm làm vợ/chồng',
    'form.parentInLaw': 'Cha/mẹ (chồng/vợ):',
    'form.childInLaw': 'Con (dâu/rể):',
    'form.parentAdopt': 'Cha/mẹ (nuôi):',
    'form.childAdopt': 'Con (nuôi):',
    'form.addAsDaughterInLaw': 'Thêm làm con dâu',
    'form.addAsSonInLaw': 'Thêm làm con rể',
    'form.daughterInLaw': 'Con dâu',
    'form.sonInLaw': 'Con rể',
    'form.newSpouseName': 'Họ tên vợ/chồng mới',
    'form.addNewSpouseAsInLaw': 'Thêm vợ/chồng mới (con dâu/con rể)',
    'form.selectChildForInLaw': 'Chọn con (con trai → thêm con dâu, con gái → thêm con rể)',
    'form.inLawDaughterInLawHint': 'Chọn con trai trước',
    'form.inLawSonInLawHint': 'Chọn con gái trước',
    'form.generation': 'Đời',
    'form.generationPlaceholder': '1, 2, 3…',
    'form.roleLabel': 'Vai trò trong gia đình',
    'form.removeRelationship': 'Xóa quan hệ',
    'treeView.daughterInLaw': 'Con dâu',
    'treeView.sonInLaw': 'Con rể',
    'treeView.paternalGrandchild': 'Cháu nội',
    'treeView.maternalGrandchild': 'Cháu ngoại',
    'treeView.previousGenerations': 'Đời trước',
    'treeView.generationLevel': 'Đời {{n}}',
    'treeView.wifeN': 'Vợ thứ {{n}}',
    'treeView.husbandN': 'Chồng thứ {{n}}',
    'form.spouseN': 'Vợ/chồng thứ {{n}}',
    'summary.title': 'Thống kê theo nhánh',
    'summary.familyTreeSummary': 'Thống kê toàn bộ gia phả',
    'summary.empty': 'Chưa có thành viên. Thêm người đầu tiên để bắt đầu.',
    'summary.totalMembers': 'Tổng thành viên',
    'summary.deceased': 'Đã mất',
    'summary.living': 'Còn sống',
    'summary.maleMembers': 'Thành viên nam',
    'summary.femaleMembers': 'Thành viên nữ',
    'summary.livingMaleMembers': 'Thành viên nam còn sống',
    'summary.livingFemaleMembers': 'Thành viên nữ còn sống',
    'summary.age0to5': 'Từ 0–5 tuổi',
    'summary.age6to17': 'Từ 6–17 tuổi',
    'summary.age18to35': 'Từ 18–35 tuổi',
    'summary.age36to50': 'Từ 36–50 tuổi',
    'summary.age51to70': 'Từ 51–70 tuổi',
    'summary.age70plus': 'Trên 70 tuổi',
    'summary.couples': 'Cặp vợ chồng',
    'summary.parentChildLinks': 'Quan hệ cha mẹ – con',
    'summary.rootFamilies': 'Gia đình gốc',
    'summary.maleDeceased60Plus': 'Nam đã mất, từ 60 tuổi trở lên',
    'summary.byBranch': 'Thống kê theo nhánh',
    'summary.branchUnnamed': '(Nhánh chưa đặt tên)',
    'reminders.title': 'Sinh nhật & ngày giỗ gần nhất',
    'reminders.birthdaysSection': 'Sinh nhật gần nhất',
    'reminders.deathAnniversariesSection': 'Ngày giỗ gần nhất',
    'reminders.today': 'Hôm nay',
    'reminders.tomorrow': 'Ngày mai',
    'reminders.daysUntil': 'Còn {{count}} ngày',
    'reminders.turnsAge': 'tròn {{age}} tuổi',
    'reminders.emptyBirthdays': 'Chưa có ngày sinh.',
    'reminders.emptyAnniversaries': 'Chưa có ngày giỗ.',
    'reminders.menu': 'Sinh nhật & ngày giỗ',
    'gender.male': 'Nam',
    'gender.female': 'Nữ',
    'gender.other': 'Khác',
    'auth.login': 'Đăng nhập',
    'auth.register': 'Đăng ký',
    'auth.system': 'Hệ thống',
    'auth.logout': 'Đăng xuất',
    'auth.username': 'Tên đăng nhập',
    'auth.password': 'Mật khẩu',
    'auth.loginTitle': 'Đăng nhập hệ thống Gia Phả',
    'auth.registerTitle': 'Tạo tài khoản',
    'auth.noAccount': 'Chưa có tài khoản? Đăng ký',
    'auth.hasAccount': 'Đã có tài khoản? Đăng nhập',
    'auth.loginFailed': 'Sai tên đăng nhập hoặc mật khẩu.',
    'auth.manageUsers': 'Quản lý người dùng',
    'auth.manageUsersIntro': 'Tạo và quản lý tài khoản. Người dùng bị vô hiệu hóa không thể đăng nhập.',
    'auth.existingUsers': 'Người dùng hiện có',
    'auth.searchUsers': 'Tìm người dùng…',
    'auth.searchUsersLabel': 'Tìm người dùng',
    'auth.addNewUser': 'Thêm người dùng mới',
    'auth.createUser': 'Tạo người dùng',
    'auth.newUserUsername': 'Tên đăng nhập mới',
    'auth.newUserPassword': 'Mật khẩu mới (tối thiểu 4 ký tự)',
    'auth.confirmPassword': 'Xác nhận mật khẩu',
    'auth.passwordMismatch': 'Mật khẩu không khớp.',
    'auth.lastUpdated': 'Cập nhật lúc',
    'auth.action': 'Thao tác',
    'auth.userCreated': 'Đã tạo người dùng.',
    'auth.onlyAdminCanCreateUsers': 'Chỉ admin mới được tạo người dùng mới.',
    'auth.viewOnly': 'Chỉ xem. Liên hệ admin để thêm hoặc sửa.',
    'auth.disabled': 'Đã khóa',
    'auth.enable': 'Bật',
    'auth.disable': 'Khóa',
    'auth.editUser': 'Sửa',
    'auth.updateUser': 'Cập nhật người dùng',
    'auth.removeUser': 'Xóa',
    'auth.cannotDeleteSelf': 'Bạn không thể xóa tài khoản của chính mình.',
    'auth.cannotDisableAdmin': 'Không thể vô hiệu hóa tài khoản admin.',
    'auth.removeUserConfirm': 'Xóa người dùng "{{name}}"?' ,
    'auth.userUpdated': 'Đã cập nhật.',
    'auth.userRemoved': 'Đã xóa người dùng.',
    'auth.exportCsv': 'Xuất CSV',
    'auth.importCsv': 'Nhập CSV',
    'auth.exportCsvConfirm': 'Xuất gia phả ra file CSV? File sao lưu sẽ được tải về.',
    'auth.importCsvConfirm': 'Nhập từ CSV? Bạn sẽ chọn file sao lưu. Các mục sẽ được thêm hoặc cập nhật (cùng ID sẽ bị cập nhật).',
    'auth.saveDatabase': 'Lưu cơ sở dữ liệu (.sqlite)',
    'auth.saveDatabaseConfirm': 'Lưu toàn bộ cơ sở dữ liệu ra file .sqlite? Bao gồm mọi người dùng và dữ liệu gia phả.',
    'auth.restoreDatabase': 'Khôi phục từ file cơ sở dữ liệu',
    'auth.restoreDatabaseConfirm': 'Khôi phục từ file .sqlite? Toàn bộ dữ liệu hiện tại sẽ bị thay thế. Bạn cần đăng nhập lại.',
    'auth.setMyBranch': 'Chọn nhánh của tôi',
    'auth.setMyBranchIntro': 'Chọn nhánh mặc định. Cây gia phả và sinh nhật/ngày giỗ sẽ lọc theo nhánh này sau khi đăng nhập.',
    'auth.defaultBranch': 'Nhánh mặc định',
  },
}

const LOCALE_KEY = 'famitree-locale'

export function getStoredLocale(): Locale {
  try {
    const stored = localStorage.getItem(LOCALE_KEY)
    if (stored === 'en' || stored === 'vi') return stored
  } catch {
    // ignore
  }
  return 'vi'
}

export function setStoredLocale(locale: Locale): void {
  try {
    localStorage.setItem(LOCALE_KEY, locale)
  } catch {
    // ignore
  }
}

export function translate(
  locale: Locale,
  key: string,
  params?: Record<string, string | number>
): string {
  const text = translations[locale]?.[key] ?? translations.en[key] ?? key
  if (!params) return text
  return Object.entries(params).reduce(
    (acc, [k, v]) => acc.replace(new RegExp(`\\{\\{${k}\\}\\}`, 'g'), String(v)),
    text
  )
}
